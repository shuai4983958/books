{"./":{"url":"./","title":"简介","keywords":"","body":"gitBook接入文档步骤 环境配置 gitbook命令行工具npm install gitbook-cli -g gitbook命令 初始化项目gitbook init 本地预览书籍 （http://localhost:4000/）gitbook serve 打包生成静态资源gitbook build 该命令会在当前文件夹中生成_book文件夹，用户可以将这个文件夹内容托管到网上，从而实现内容的发布。 目录结构 ├── book.json // 配置文件 ├── pages // gitbook资源文件根目录 | ├── README.md // 前言或简介 | └── SUMMARY.md // gitbook目录 | └── aijianzi/ | └────── README.md | └────── something.md 如何实现左侧目录跟右侧文章之间的锚点跳转在SUMMURY.md文件中 markdown语法： [目录名](文件路径，相对于自己的book的根目录，受book.json中的root影响) 如何制作多级目录在SUMMURY.md中 文件实现目录结构的设定，在该文件中，可以通过缩进实现多级目录的效果 * [交接文档](aijianzi/README.md) * [管理端](aijianzi/admin/README.md) * [课程商品流程](aijianzi/admin/adminCourse.md) * [C端直播流程](aijianzi/admin/adminVideo.md ) * [机构端](aijianzi/agencyAdmin/README.md) * [交接](aijianzi/agencyAdmin/agencyAdmin.md) * [教师端](aijianzi/agencyTeacher/README.md) * [交接](aijianzi/agencyTeacher/agenct.md) 如何为目录添加序号gitBook的目录是默认是没有序号的，若想添加编号给目录，book.json中添加配置即可： \"theme-default\": { \"showLevel\": true }, 将gitbook内容托管到 git-pages上 建仓库，托管源代码git init git add . git commit -m 'readme' git remote add origin https://远程仓库地址.git git push -u origin master 使用pages服务展示gitbook书籍打开git 的pages服务 Copyright © Iron 2018 all right reserved，powered by Gitbook修订时间： 2019-12-30 11:34:05 "},"aijianzi/":{"url":"aijianzi/","title":"爱尖子","keywords":"","body":"dad Copyright © Iron 2018 all right reserved，powered by Gitbook修订时间： 2019-12-30 11:08:14 "},"aijianzi/admin/":{"url":"aijianzi/admin/","title":"管理端","keywords":"","body":"Copyright © Iron 2018 all right reserved，powered by Gitbook修订时间： 2019-12-30 11:05:09 "},"aijianzi/admin/adminCourse.html":{"url":"aijianzi/admin/adminCourse.html","title":"课程商品流程","keywords":"","body":"课程商品流程 一些静态的无复杂交互的页面就不写了，重点梳理一下课程以及C端直播的逻辑 1. 课程，商品相关 （1）. 创建课程 路由 功能： 发布大纲以后不可编辑 课程信息的选择是相互影响的，大致总结了一版本，可能不全，具体还是以代码为准爱尖子课程创建联动逻辑 （2）. 创建课程大纲 路由 在创建完课程以后，在进入课程大纲页面之前会先选择是否创建，进入课程大纲页面以后，先提交大纲时间才可对大纲进行编辑，在这里只对课程类型分了组件，统一了有无章节的接口中的fetchSyllabusInfo onChangeChapter = (checked: number) => { this.setState({ haveChapter: checked ? 1 : 0, }); }; import CourseStartDate from './components/CourseStartDate'; 录播课课程大纲 import RecordCourse from '../recordCourse/list'; 限制：整体来说录播课的课程大纲是比较清晰跟简单的 1.唯一的限制，大纲是否发布，跟时间无关 2.章节内排序，需要至少2个章节才能激活排序按钮，无法跨章节排序 章节：新建，修改， 删除章节：只需要章节名称 课次：按类型区分（3种） 录播讲： 录播名称， 视频来源 可修改删除，跟时间无关 回放(需要关联回放录播资源) 素材 考试讲： 考试名称 时长 章节内排序中的sortLessonsById，需要前端做聚合，这里主要用了findIndex的功能 ``` 4. 直播课课程大纲，包含直播，双师直播 import CourserLiveVideo from './components/CourserLiveVideo'; 限制：整体来说直播课比录播稍微类型多一点，但也不复杂 1.唯一的限制，大纲是否发布，内部的课节修改，增加，删除权限跟课节的时间无关 2.章节内排序，需要至少2个章节才能激活排序按钮，无法跨章节排序 1. 章节：新建，修改， 删除章节：只需要章节名称 2. 课次：按类型区分（3种）内部的课节修改，增加，删除权限跟课节的时间无关 1. 双师直播讲： 1. 课节名称 2. 开课时间 2. 校内讲： 1. 课节名称 2. 开课时间 3. 考试讲： 1. 课节名称 2. 开考时间 1. 开考开始日期 === 选择卡片的日期 2. 开考的结束日期 ``` 发布大纲，由后端控制，需要提交一个课程大纲的时间，就可以发布，可以是个空的模版授课老师可以随后指定 （3）. 发布大纲 路由 逻辑功能： 无任何限制，可以发布一个空的大纲，也可以发布带任何类型的课次的大纲 （4）. 创建商品 路由 逻辑功能： 商品的名称取决于关联课程的名称。 商品不可以关联未发布的大纲。 （5）. 商品上架，下架 路由 逻辑功能： 是否关联课程 课程中的直播讲全部关联组件，直播和双师直播商品，上架时要求每个直播/双师直播课次都需关联主讲老师， 否则上架状态一直显示：准备中 下架需要谨慎，没有逻辑限制 （5）. 课程的内容关联 路由 逻辑功能： 渲染有无章节的课程这里没问题 课节类型(0:直播讲;1:考试;2:录播;3:测评;4:双师;5:校内讲) 录播要区分'来源（1回放；2素材；）', 组件类型的操作上有些限制和处理 不同组件的编辑，禁用，删除逻辑： 启用禁用权限:handleDisabledFlag, 编辑逻辑onConfirmWhetherAnswerOrnot 删除onClickRelationShips,onGetRelationStatus 通过课次的类型，来控制不同组件的编辑，禁用，删除逻辑 增加作业功能（0:直播讲;4:双师;5:校内讲以及录播素材2）录播回放和测试是无增加作业功能的 启用状态：当前的课节的开始时间 > 当前的时区时间（课节未开始） 课节类型下的组件类型作业（HOMEWORK）增加次数暂设上限为1次, 组件类型 组件名称 操作 COURSEWARE：课件 上传过可点击下载，无上传只显示名成 上传、删除 HANDOUT：讲义 上传过可点击下载，无上传只显示名成 上传、删除 DATAGRAM： 资料包 上传过可点击下载，无上传只显示名成 上传、删除 EXCELLENTVIDEO：精品视频 点击弹窗 编辑，删除 DIAGNOSE_REPORT: 测评诊断报告 只显示名称 设置报告 其他所有组件类型 只显示名称 编辑、删除 其实总的来说，就是不同的课节类型下的不同组件的处理方式不同，最大程度的体现在不同组件编辑所起的弹窗不同 (toDO DIAGNOSE_REPORT flag中的字段跟后端结构匹配) （6）. 课程排班管理 路由 功能： 把课节关联上主讲老师 关联老师在上架之前操作都可以，发布大纲以后可以 // 画一个流程 Copyright © Iron 2018 all right reserved，powered by Gitbook修订时间： 2019-12-30 10:59:39 "},"aijianzi/admin/adminVideo.html":{"url":"aijianzi/admin/adminVideo.html","title":"C端直播流程","keywords":"","body":"管理端C端直播交接文档 （1）. 课程入口限制 路由 功能：renderCardFooter 上课之前，C端直播提前半个小时打开，双师直播提前 1个小时 下课之后，C端直播延迟半个小时关闭，双师直播延迟 半小时 （2）. 小助手安装及注意事项： 协议写入windows注册表，伪协议启动程序 参数说明 比如：小助手配置表config.ni文件参数具体的合图步骤 打开合图开关publishStream\\merge=false 改为 publishStream\\merge=true 合图位置 publishStream\\width=960 // 合图容器的宽度，也是最终合图的宽度 publishStream\\height=720 // 合图容器的高度，也是最终合图的高度 publishStream\\subX=752 // 小流，即视频头像流，相对于合图容器的的左上角x轴坐标点 publishStream\\subY=0 // 小流，即视频头像流，相对于合图容器的的左上角y轴坐标点 publishStream\\mainX=0 // 大流，即屏幕录制流，相对于合图容器的的左上角x轴坐标点 publishStream\\mainY=0 // 大流，即屏幕录制流，相对于合图容器的的左上角y轴坐标点 publishStream\\subWidth=208 // 小流，即视频头像流的宽度 publishStream\\subHeight=117 // 小流，即视频头像流的高度 publishStream\\mainWidth=960 // 大流，即屏幕录制流的宽度， publishStream\\mainHeight=720 // 大流，即屏幕录制流的高度 上述的参数明确： 输出宽为960，高为720的合图视频. 默认如果位置有重叠小流会层级会高于大流其中小流的左上角位置为（752，0） 宽为960-752=208，高为（宽高比16:9算出117），位置为合图容器的右上角大流的左上角位置为（0，0） 宽为960，高尾720，盛满了整个容器。 （3）. C端直播信令原始设计 路由 课程状态 老师点击上课以后，学生才可以加入直播频道。 老师未点击上课，学生可以提前加入信令频道，课前聊天。 老师点击暂停，只是mute掉老师的声音。 老师点击继续上课，录制老师的声音 老师点击下课，老师退出直播，信令房间，学生接受到下课指令以后同步退出直播，信令房间 题目相关的接口整理： 老师推题 学生根据信令内容去生成对应的答题记录id 学生拉题目， 提交 拉结果 页面初始化，以及调用顺序 通过课程系统lessonId去直播系统查询是否存在roomId 存在即获取，不存在通过lessonId创建roomId 获取roomId以后，获取房间的状态， 开始鉴权，异步获取web端以及windows端直播，信令鉴权token， 获取widows端鉴权信息通过websocket通信初始化小助手。 唯一的n判断小助手启动的时候是否在同一个频道里的rtcHelperIsRoom 严格比较roomId以及主流，小流的uid和token是否严格严格相等 如果相等，获取windwos端是否参入直播间，如果没有加入，重新加入 如果不严格相等，进入新的房间 // todo稳定版本小助手 Copyright © Iron 2018 all right reserved，powered by Gitbook修订时间： 2019-12-30 11:01:37 "},"aijianzi/agencyAdmin/":{"url":"aijianzi/agencyAdmin/","title":"机构端","keywords":"","body":"Copyright © Iron 2018 all right reserved，powered by Gitbook修订时间： 2019-12-30 11:05:16 "},"aijianzi/agencyAdmin/agencyAdmin.html":{"url":"aijianzi/agencyAdmin/agencyAdmin.html","title":"交接","keywords":"","body":"机构校长交接文档 1. 用户管理-学生管理（student-manage） （1）. 课程权限 文件夹：course-limit 功能：显示学生的课程信息以及权限开关 （2）. 学生详情 文件夹：student-detail 功能：显示学生信息，显示课程数据，显示学习日志，显示沟通记录，纯展示，无交互 2. 商品订购-流量购买(goods/flow) （1）. 流量列表 文件夹：flow-list 功能： 1. 流量订单的详情列表，以及购买流量数实时计算总价 3. 订单管理 （1）. 订单数据 文件夹：order-list 功能： 1. 订单的详情列表,纯展示，无交互 Copyright © Iron 2018 all right reserved，powered by Gitbook修订时间： 2019-12-30 11:02:12 "},"aijianzi/agencyTeacher/":{"url":"aijianzi/agencyTeacher/","title":"教师端","keywords":"","body":"Copyright © Iron 2018 all right reserved，powered by Gitbook修订时间： 2019-12-30 11:05:22 "},"aijianzi/agencyTeacher/agenct.html":{"url":"aijianzi/agencyTeacher/agenct.html","title":"交接","keywords":"","body":"Copyright © Iron 2018 all right reserved，powered by Gitbook修订时间： 2019-12-30 11:02:46 "}}